id: https://www.biorxiv.org/content/10.1101/2023.01.22.525049v1 #todo what should be here? the generator wants schema id
name: CCN2
prefixes:
  linkml: https://w3id.org/linkml/
imports:
  - linkml:types
default_range: string

classes:
  taxonomy:
    attributes:
      cell_set_accession:
        required: true
        description: >-
          Primary identifier of the cell set. This field should be programmatically assigned, not edited.
        readonly: 1 #todo
      cell_type_name:
        description: >-
          The primary name/symbol to be used for the (provisional) cell type defined by this cell set. This is left optional, but is strongly encouraged for every node that is linked.
        aliases: [ "primary_cell_type_alias"] #todo: alliases can be used for ccn1_mapping? doesn't show in json
      parent_cell_set_accession:
        required: true
        description: >-
          The cell set accession of the parent cell set in the taxonomy. This field should be programmatically assigned, not edited.
      synonyms:
        description: >-  #
          A list of alternative names for this cell type. Separate entries with a '|'. Do not use terms with a scope that is much narrower or broader than the cell type being described.
      synonym_provenance:
        description: >-
          Each entry in the synonyms field should have a corresponding entry here, either the DOI of a supporting publication (in the form the form doi:10.1126/journal.abj6641) or the editor's ORCID (in the form: ORCID:01243-234-678). Multiple entries should be separated by a '|'.
      description:
        description: >-
          Optional free text description of the cluster. This could be particularly useful for describing the properties of cells clustered from techniques that provide data on morphology, function and connectivity, e.g. patch-seq & epi-retro-seq.
      classifying_ontology_term_id:
        description: >-
          The ID of an ontology term that classifies the cell type defined by this node.
      classifying_ontology_term_name:
        required: true
        description: >-
          The name of the ontology term in the classification_id column
      classification_provenance:
        required: true
        description: >-
          Either the DOI(s) of a supporting publication (in the form the form doi:10.1126/journal.abj6641) or the editor's ORCID (in the form: ORCID:01243-234-678). Multiple entries should be separated by a '|'.
      classification_comment:
        description: >-
          A free text comment describing the evidence for this classification.
      rank:
        description: >-
          Algorithmically generated hierarchical taxonomies can be complex, with many nodes between root and leaf and branches of variable depth. To simplify this for display and discussion it can be useful to assign nodes to a 3 level hierarchy, with leaf nodes at the bottom.
        range: Rank

  cross_taxonomy_mapping:
    attributes:
      cell_set_accession:
        required: true
        range: cell_set_accession
      cell_type_name:
        required: true
        range: cell_type_name
      mapped_cell_set_accession:
        required: true
        description: >-
          The accession (ID) of a cell set in a second taxonomy that this cell set maps to.
      mapped_cell_type_name:
        required: true
        description: >-
          The name of the cell type corresponding to the mapped_cell_set_accession.
      evidence_comment:
        required: true
        description: >-
          A free text description of the evidence supporting this mapping. If a similarity_score is include, please also include details of how this was calculated.
      similarity_score:
        description: >-
          A score recording the similarity between mapped nodes.
        range: float
        minimum_value: 0
        maximum_value: 1
      provenance:
        range: provenance

  location_mapping:
    attributes:
      cell_set_accession:
        required: true
        range: cell_set_accession
      cell_type_name:
        required: true
        range: cell_type_name
      location_ontology_term_id:
        required: true
        description: >-
          The ID of an ontology term that refers to a brain region that this cell type is located in. Ideally this should be the ID of a term defined as a region in a standard atlas.
      location_ontology_term_name:
        required: true
        description: >-
          Name of the term whose ID is recorded in the ontology_term_id field.
      evidence_comment:
        description: >-
          A comment describing the evidence for this location mapping
      supporting_data:
        description: >-
          A link to data supporting this location mapping.
      provenance:
        required: true
        range: provenance

  cell_set_accession_to_cell_mapping:
    attributes:
      sample:
        required: true
        description: >-
          Cell sample identifier.
      cell_accessions:
        required: true
        description: >-
          List of cell set accession identifiers.
        multivalued: true
#        range: string
#        inlined_as_list: true



  cell_set_accession: #todo: the capitalization is changed by the generator
    description: >-
      Primary identifier for cell set.

  cell_type_name:
    description: >-
      The primary name/symbol to be used for the cell type defined by this cell set.
    aliases: [ "primary_cell_type_alias"] #todo: alliases can be used for ccn1_mapping? doesn't show in json


  provenance:
    description: >-
      ORCID of the person doing the mapping using the syntax ORCID:0123-4567-890. Optionally include supporting publications using DOIs of the form doi:10.1126/journal.abj6641.
  

enums:
  Rank:
    permissible_values:
      leaf_node:
      family:
      gross:

#TODO: not sure what to do with it
#"oneOf": [
#      { "$ref": "#/definitions/taxonomy" },
#      { "$ref": "#/definitions/cross_taxonomy_mapping" },
#      { "$ref": "#/definitions/location_mapping" },
#      { "$ref": "#/definitions/cell_set_accession_to_cell_mapping" }
#  ]
